---
import Layout from "../../layouts/Layout.astro";
---

<Layout>
  <section class="section min-h-screen bg-gray-50 py-10">
    <div class="max-w-6xl mx-auto bg-white rounded-xl p-6 shadow space-y-10">

      <!-- ====== B16: Configurar Políticas de Autenticación ====== -->
      <div>
        <h2 class="text-xl font-semibold mb-4">Políticas de Autenticación</h2>
        <form class="space-y-4">
          <div>
            <label class="block mb-1 text-sm">Longitud mínima de contraseña</label>
            <input type="number" class="w-full border p-2 rounded" placeholder="10">
          </div>
          <div>
            <label class="block mb-1 text-sm">Requerir 2FA</label>
            <select class="w-full border p-2 rounded">
              <option>Opcional</option>
              <option>Obligatorio</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 text-sm">Bloqueo tras intentos fallidos</label>
            <input type="text" class="w-full border p-2 rounded" placeholder="5 intentos / 15 minutos">
          </div>
          <div>
            <label class="block mb-1 text-sm">Expiración por inactividad (minutos)</label>
            <input type="number" class="w-full border p-2 rounded" placeholder="20">
          </div>
          <button class="w-full bg-blue-500 text-white p-2 rounded">Guardar</button>
        </form>
      </div>

      <!-- ====== B17: Invitar y Revocar Accesos ====== -->
      <div>
        <h2 class="text-xl font-semibold mb-4">Invitar y Revocar Accesos</h2>
        <form class="space-y-4 mb-6">
          <div>
            <label class="block mb-1 text-sm">Email del usuario</label>
            <input type="email" class="w-full border p-2 rounded" placeholder="usuario@nonna.cl">
          </div>
          <div>
            <label class="block mb-1 text-sm">Rol</label>
            <select class="w-full border p-2 rounded">
              <option>Administrador</option>
              <option>Encargado de despacho</option>
              <option>Cliente corporativo</option>
            </select>
          </div>
          <button class="w-full bg-green-500 text-white p-2 rounded">Enviar Invitación</button>
        </form>
        <div class="overflow-x-auto">
          <table class="min-w-full border">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-2 text-left text-sm">Usuario</th>
                <th class="px-4 py-2 text-left text-sm">Rol</th>
                <th class="px-4 py-2 text-left text-sm">Estado</th>
                <th class="px-4 py-2 text-center text-sm">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-t">
                <td class="px-4 py-2">admin.nuevo@nonna.cl</td>
                <td class="px-4 py-2">Administrador</td>
                <td class="px-4 py-2">Activo</td>
                <td class="px-4 py-2 text-center">
                  <button class="bg-red-500 text-white px-2 py-1 rounded">Revocar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ====== B18: Auditoría de Accesos ====== -->
      <div>
        <h2 class="text-xl font-semibold mb-4">Auditoría de Accesos</h2>
        <div class="flex gap-4 mb-4">
          <input type="date" class="border p-2 rounded">
          <input type="text" class="border p-2 rounded" placeholder="Usuario">
          <select class="border p-2 rounded">
            <option>Todos</option>
            <option>Login</option>
            <option>Fallo</option>
            <option>Cambio de rol</option>
            <option>Alta/Baja</option>
          </select>
          <button class="bg-blue-500 text-white px-4 py-2 rounded">Filtrar</button>
          <button class="bg-green-500 text-white px-4 py-2 rounded">Exportar CSV</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full border">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-2 text-left text-sm">Usuario</th>
                <th class="px-4 py-2 text-left text-sm">Evento</th>
                <th class="px-4 py-2 text-left text-sm">Fecha</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-t">
                <td class="px-4 py-2">despacho@nonna.cl</td>
                <td class="px-4 py-2">Intento fallido</td>
                <td class="px-4 py-2">2025-09-26</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </section>
</Layout>
