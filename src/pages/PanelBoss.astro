---
import Layout from "../layouts/Layout.astro";
import SeguridadBoss from "../components/dueno/SeguridadBoss.astro";
import CatalogoBoss from "../components/dueno/CatalogoBoss.astro";
import AnaliticaBoss from "../components/dueno/AnaliticaBoss.astro";
---

<Layout title="Panel Dueño">
  <section class="min-h-screen bg-gray-50">
    <nav class=" text-white sticky top-0 z-40 shadow-md">
      <div
        class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"
      >
        <div class="flex items-center gap-3">
          <div class="bg-white/10 p-2 rounded-lg">
            <i class="ri-briefcase-4-fill text-xl text-yellow-400"></i>
          </div>
          <div>
            <h1 class="text-lg font-bold leading-none">Panel Ejecutivo</h1>
          </div>
        </div>

        <button
          id="logout-btn"
          class="text-sm font-medium text-red-400 hover:text-red-300 flex items-center gap-2 transition"
        >
          <i class="ri-logout-box-line"></i> Salir
        </button>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-8">
      <div
        class="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden min-h-[80vh]"
      >
        <div
          class="bg-gray-50 border-b border-gray-200 px-6 pt-4 flex flex-wrap gap-2"
        >
          <button
            class="tab-btn px-6 py-3 text-sm font-bold text-primary border-b-2 border-primary transition hover:bg-gray-100 rounded-t-lg flex items-center gap-2"
            data-target="tab-analitica"
          >
            <i class="ri-bar-chart-grouped-line text-lg"></i> Resumen & Analítica
          </button>

          <button
            class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 border-b-2 border-transparent transition hover:text-gray-700 hover:bg-gray-100 rounded-t-lg flex items-center gap-2"
            data-target="tab-catalogo"
          >
            <i class="ri-restaurant-2-line text-lg"></i> Carta & Menú
          </button>

          <button
            class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 border-b-2 border-transparent transition hover:text-gray-700 hover:bg-gray-100 rounded-t-lg flex items-center gap-2"
            data-target="tab-seguridad"
          >
            <i class="ri-shield-keyhole-line text-lg"></i> Seguridad & Accesos
          </button>
        </div>

        <div class="p-6 bg-white">
          <div id="tab-analitica" class="tab-content animate-fade-in">
            <AnaliticaBoss />
          </div>

          <div id="tab-catalogo" class="tab-content hidden animate-fade-in">
            <CatalogoBoss />
          </div>

          <div id="tab-seguridad" class="tab-content hidden animate-fade-in">
            <SeguridadBoss />
          </div>
        </div>
      </div>
    </main>
  </section>

  <script>
    // @ts-nocheck
    document.addEventListener("DOMContentLoaded", () => {
      // --- LÓGICA DE PESTAÑAS ---
      const tabs = document.querySelectorAll(".tab-btn");
      const contents = document.querySelectorAll(".tab-content");

      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          tabs.forEach((t) => {
            t.classList.remove("border-primary", "text-primary", "font-bold");
            t.classList.add(
              "border-transparent",
              "text-gray-500",
              "font-medium"
            );
          });

          contents.forEach((c) => c.classList.add("hidden"));

          tab.classList.remove(
            "border-transparent",
            "text-gray-500",
            "font-medium"
          );
          tab.classList.add("border-primary", "text-primary", "font-bold");

          const targetId = tab.dataset.target;
          document.getElementById(targetId)?.classList.remove("hidden");
        });
      });

      // --- LOGOUT ---
      document.getElementById("logout-btn")?.addEventListener("click", () => {
        if (confirm("¿Cerrar sesión de dueño?")) {
          sessionStorage.clear();
          window.location.href = "/Auth";
        }
      });
    });
  </script>

  <style>
    .animate-fade-in {
      animation: fadeIn 0.3s ease-out;
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(5px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</Layout>
