---
import Producto from "../admin/Producto.astro" // si lo tienes creado como componente
---

<section class="bg-gray-50 py-10 rounded-xl shadow-sm">
  <div class="max-w-7xl mx-auto px-6 space-y-10">
    <!-- Título -->
    <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <h2 class="text-2xl font-bold text-primary">Gestión del Catálogo</h2>
      <button
        id="open-product-modal"
        class="px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent-secondary transition"
      >
        + Agregar Producto
      </button>
    </header>

    <!-- Tabla de productos -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-primary text-white">
          <tr>
            <th class="px-4 py-3 text-left">Imagen</th>
            <th class="px-4 py-3 text-left">Nombre</th>
            <th class="px-4 py-3 text-left">Categoría</th>
            <th class="px-4 py-3 text-left">Precio</th>
            <th class="px-4 py-3 text-left">Stock</th>
            <th class="px-4 py-3 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-3">
              <img src="/images/pasta.png" class="w-12 h-12 rounded object-cover" />
            </td>
            <td class="px-4 py-3">Spaghetti Clásico</td>
            <td class="px-4 py-3">Pastas</td>
            <td class="px-4 py-3">$4.990</td>
            <td class="px-4 py-3">120</td>
            <td class="px-4 py-3 text-center space-x-2">
              <button class="px-3 py-1 bg-accent text-white rounded hover:bg-accent-secondary transition">
                Editar
              </button>
              <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition">
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal de producto -->
    <div
      id="producto-modal"
      class="fixed inset-0 hidden items-center justify-center z-50 bg-white/20 backdrop-blur-sm"
    >
      <div class="bg-white rounded-xl shadow-lg w-full max-w-3xl p-6 relative">
        <button
          id="close-producto-modal"
          class="absolute top-3 right-3 text-gray-500 hover:text-gray-800"
        >
          <i class="ri-close-fill text-3xl"></i>
        </button>
        <Producto />
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("producto-modal");
    const openBtn = document.getElementById("open-product-modal");
    const closeBtn = document.getElementById("close-producto-modal");

    openBtn?.addEventListener("click", () => {
      modal?.classList.remove("hidden");
      modal?.classList.add("flex");
    });

    closeBtn?.addEventListener("click", () => {
      modal?.classList.add("hidden");
      modal?.classList.remove("flex");
    });
  });
</script>
